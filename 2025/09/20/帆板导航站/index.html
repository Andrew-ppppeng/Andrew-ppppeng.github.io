<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Andrew Peng,andrew.peng.9901@gmail.com"><title>用Claude code开发一个全球帆板运动俱乐部的导航站 · Andrew's Blog</title><meta name="description" content="网站链接：https://windsurfing.top
背景本人是帆板运动爱好者，这项运动依赖风力和相对难以运输的设备，所以很多爱好者会去常年风力充沛的地方旅行，并租用当地俱乐部的器材。在逛Reddit相关论坛的时候，发现很多人在问XXX区域有没有俱乐部推荐，所以想做一个帆板俱乐部导航站，帮帆板爱"><meta name="keywords" content="Hexo,HTML,CSS,android,Linux"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><script>(function (f, b) { if (!b.__SV) { var e, g, i, h; window.mixpanel = b; b._i = []; b.init = function (e, f, c) { function g(a, d) { var b = d.split("."); 2 == b.length && ((a = a[b[0]]), (d = b[1])); a[d] = function () { a.push([d].concat(Array.prototype.slice.call(arguments, 0))); }; } var a = b; "undefined" !== typeof c ? (a = b[c] = []) : (c = "mixpanel"); a.people = a.people || []; a.toString = function (a) { var d = "mixpanel"; "mixpanel" !== c && (d += "." + c); a || (d += " (stub)"); return d; }; a.people.toString = function () { return a.toString(1) + ".people (stub)"; }; i = "disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split( " "); for (h = 0; h < i.length; h++) g(a, i[h]); var j = "set set_once union unset remove delete".split(" "); a.get_group = function () { function b(c) { d[c] = function () { call2_args = arguments; call2 = [c].concat(Array.prototype.slice.call(call2_args, 0)); a.push([e, call2]); }; } for ( var d = {}, e = ["get_group"].concat( Array.prototype.slice.call(arguments, 0)), c = 0; c < j.length; c++) b(j[c]); return d; }; b._i.push([e, f, c]); }; b.__SV = 1.2; e = f.createElement("script"); e.type = "text/javascript"; e.async = !0; e.src = "undefined" !== typeof MIXPANEL_CUSTOM_LIB_URL ? MIXPANEL_CUSTOM_LIB_URL : "file:" === f.location.protocol && "//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//) ? "https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js" : "//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js"; g = f.getElementsByTagName("script")[0]; g.parentNode.insertBefore(e, g); } })(document, window.mixpanel || []);
mixpanel.init('7427691a1b9302be1f793e9c0c85d2c0', {debug: true, track_pageview: true, persistence: 'localStorage'})</script><meta name="generator" content="Hexo 5.4.0"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/circle-logo@2x.png" style="width:127px;"><h3 title=""><a href="/">Andrew's Blog</a></h3><div class="description"><p>知君仙骨无寒暑，千载相逢如旦暮</p></div></div></div><ul class="social-links"><li><a href="/atom.xml" title="RSS"><i class="fa fa-rss"></i></a></li><li><a href="mailto:andrew_peng@foxmail.com"><i class="fa fa-envelope"></i></a></li><li><a target="_blank" rel="noopener" href="http://github.com/Andrew-ppppeng"><i class="fa fa-github"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a target="_blank" rel="noopener" href="https://www.caicai.me"> CaiCai </a><span>&</span><a target="_blank" rel="noopener" href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>用Claude code开发一个全球帆板运动俱乐部的导航站</a></h3></div><div class="post-content"><p>网站链接：<a target="_blank" rel="noopener" href="https://windsurfing.top/">https://windsurfing.top</a></p>
<h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>本人是帆板运动爱好者，这项运动依赖风力和相对难以运输的设备，所以很多爱好者会去常年风力充沛的地方旅行，并租用当地俱乐部的器材。<br>在逛Reddit相关论坛的时候，发现很多人在问XXX区域有没有俱乐部推荐，所以想做一个帆板俱乐部导航站，帮帆板爱好者基于地理位置，提供的服务以及支持的水上运动类型去筛选俱乐部。</p>
<h3 id="用了哪些技术-工具"><a href="#用了哪些技术-工具" class="headerlink" title="用了哪些技术/工具"></a>用了哪些技术/工具</h3><ul>
<li>网页框架：Next.JS</li>
<li>数据库：Sanity （Headless CMS）</li>
<li>部署：Vercel</li>
<li>开发：Claude Code, Cursor</li>
<li>俱乐部数据的收集：Exa AI的Webset（一个基于自然语言搜索，返回结构化数据的产品）</li>
<li>网站内容爬取：Jina AI</li>
</ul>
<h3 id="开发流程"><a href="#开发流程" class="headerlink" title="开发流程"></a>开发流程</h3><ol>
<li>在EXA AI中，提问每个大洲的帆板俱乐部有哪些，让他给出URL（这里EXA会自动做去重，总结，并给你最符合需求的URL）<img src="https://andrew-ppppeng.github.io/images/exa.png" width=256 height=256 alt="exa.png" title="exa"  /></li>
</ol>
<ol start="2">
<li><p>基于URL，使用Jina AI爬取网站内容，并传给大模型（提示词如下，是Claude Code写的，我稍微改了一下）</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">You are a professional windsurfing website service analysis expert. Please carefully analyze the following website content and identify the specific services provided by this website/organization.</span><br><span class="line"></span><br><span class="line"><span class="section">## Website Information:</span></span><br><span class="line"><span class="strong">**URL**</span>: &#123;url&#125;</span><br><span class="line"><span class="strong">**Website Title**</span>: &#123;title&#125;</span><br><span class="line"><span class="strong">**Existing Description**</span>: &#123;long<span class="emphasis">_description&#125;</span></span><br><span class="line"><span class="emphasis"><span class="strong">**Website Content**</span>: &#123;website_</span>content&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">## Analysis Task:</span></span><br><span class="line">Based on the website content and existing description, please analyze the services provided by this website and return ONLY the following JSON format:</span><br><span class="line"></span><br><span class="line">\<span class="code">```json</span></span><br><span class="line"><span class="code">&#123;&#123;</span></span><br><span class="line"><span class="code">    &quot;provided_service&quot;: [</span></span><br><span class="line"><span class="code">        &quot;equipment_rental&quot;,</span></span><br><span class="line"><span class="code">        &quot;training_lessons&quot;</span></span><br><span class="line"><span class="code">    ],</span></span><br><span class="line"><span class="code">    &quot;supported_watersports&quot;: [</span></span><br><span class="line"><span class="code">        &quot;Windsurfing&quot;,</span></span><br><span class="line"><span class="code">        &quot;Kitesurfing&quot;,</span></span><br><span class="line"><span class="code">        &quot;SUP&quot;</span></span><br><span class="line"><span class="code">    ],</span></span><br><span class="line"><span class="code">    &quot;confidence_score&quot;: 0.85,</span></span><br><span class="line"><span class="code">    &quot;target_audience&quot;: &quot;Target audience description&quot;,</span></span><br><span class="line"><span class="code">    &quot;note&quot;: &quot;Additional notes if needed, especially when &#x27;other&#x27; category is used or important details need clarification&quot;</span></span><br><span class="line"><span class="code">&#125;&#125;</span></span><br><span class="line"><span class="code">\```</span></span><br><span class="line"></span><br><span class="line"><span class="section">## Service Category Definitions (STRICT - Use EXACTLY these 9 categories):</span></span><br><span class="line"><span class="strong">**You MUST use only these exact category names, do not modify or create new ones:**</span></span><br><span class="line"><span class="bullet">-</span> equipment<span class="emphasis">_rental: Equipment rental (windsurfing boards, sails, wetsuits, helmets, masts, etc.)</span></span><br><span class="line"><span class="emphasis">- training_</span>lessons: Training courses (beginner courses, advanced techniques, private lessons, etc.)</span><br><span class="line"><span class="bullet">-</span> gear<span class="emphasis">_storage: Equipment storage services (board storage, equipment keeping, etc.)</span></span><br><span class="line"><span class="emphasis">- repairs_</span>maintenance: Repair and maintenance services (board repairs, equipment maintenance, sail repairs, etc.)</span><br><span class="line"><span class="bullet">-</span> retail<span class="emphasis">_sales: Retail sales (windsurfing equipment sales, accessories sales, etc.)</span></span><br><span class="line"><span class="emphasis">- accommodation: Accommodation services (windsurfing resorts, guesthouses, hotels, etc.)</span></span><br><span class="line"><span class="emphasis">- food_</span>beverage: Food and beverage services (beachside restaurants, bars, cafes, etc.)</span><br><span class="line"><span class="bullet">-</span> event<span class="emphasis">_racing: Event organization, racing competitions, regattas, tournaments, and competitive water sports events</span></span><br><span class="line"><span class="emphasis">- other: Other services (tourism services, transportation, insurance, etc.)</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">## Important Rules:</span></span><br><span class="line"><span class="emphasis">1. <span class="strong">**STRICT SERVICE CATEGORIES**</span>: Use ONLY the 9 exact category names listed above</span></span><br><span class="line"><span class="emphasis">2. <span class="strong">**If you use &quot;other&quot;**</span>: Explain what specific services fall under &quot;other&quot; in the &quot;note&quot; field</span></span><br><span class="line"><span class="emphasis">3. <span class="strong">**Supported Watersports**</span>: List all water sports mentioned (Windsurfing, Kitesurfing, Sailing, SUP, etc.)</span></span><br><span class="line"><span class="emphasis">4. <span class="strong">**Confidence Score**</span>: 0.0-1.0 based on information clarity and completeness</span></span><br><span class="line"><span class="emphasis">5. <span class="strong">**Target Audience**</span>: Be specific about who the services are for</span></span><br><span class="line"><span class="emphasis">6. <span class="strong">**Note Field**</span>: Use for clarifications, especially when &quot;other&quot; category is needed</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">## Analysis Focus:</span></span><br><span class="line"><span class="emphasis">- Focus on water sports related services</span></span><br><span class="line"><span class="emphasis">- Identify core services: equipment, training, storage, sales</span></span><br><span class="line"><span class="emphasis">- Consider user needs: beginners, advanced, equipment owners</span></span><br><span class="line"><span class="emphasis">- Note any unique or special services that don&#x27;t fit standard categories</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">Please return ONLY valid JSON format without any additional text.</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis"></span></span><br></pre></td></tr></table></figure></li>
<li><p>大模型基于网站内容，按照提示词中定义的JSON格式，输出每个俱乐部的位置，服务，运动类型等信息，并传到数据库。</p>
</li>
<li><p>让AI写了个脚本，给每个网站截图并获取Icon，传到数据库</p>
</li>
<li><p>调用Here API, 为每个俱乐部增加经纬度数据，传到数据库</p>
</li>
</ol>
<h3 id="遇到的问题："><a href="#遇到的问题：" class="headerlink" title="遇到的问题："></a>遇到的问题：</h3><ol>
<li><p>AI的幻觉问题。<br>主要是AI判断俱乐部的水上运动类别这块，加了一些本不存在的运动类别，以Windsurfing(帆板)为主。<br>我怀疑是提示词中出现了太多Windsurfing 文本导致的。 不过情况不太严重，人工处理掉了。</p>
</li>
<li><p>Here API算出来的经纬度不准确<br>review数据的时候, 发现有些俱乐部实际地址，和Here返回的经纬度根本不在一个大洲，于是让Claude Code写了个脚本做交叉验证：</p>
</li>
<li><p>用俱乐部名字作为搜索词，将其输入Google Map，得到Google map的坐标</p>
</li>
<li><p>将Google的坐标和Here的坐标对比，距离差距&gt;100KM的，列为人工Review Item</p>
</li>
<li><p>人工验证并最后更新</p>
</li>
</ol>
<p>Btw, 人工验证的结论是，Google Map在POI方面的准确度，是远高于Here的，但是当时卡在银行卡验证上，没能申请到Google Map的API，所以才用了Here。</p>
<h3 id="使用Claude-Code的tips"><a href="#使用Claude-Code的tips" class="headerlink" title="使用Claude Code的tips"></a>使用Claude Code的tips</h3><ol>
<li><p>多用Git。<br>即使是单人项目，每完成一个功能，也要提交Git，避免AI给你生成屎山代码，又难以回滚</p>
<img src="https://andrew-ppppeng.github.io/images/gitlog.png" width=256 height=256 alt="gitlog.png" title="gitlog"  /></li>
<li><p>写好Claude.md<br>它的作用主要有两个：</p>
</li>
<li><p>将项目架构告诉大模型，节省它搜索代码库的时间和token消耗</p>
</li>
<li><p>设置全局的guideline，避免每次新开对话都要重复要求，比如代码中的注释要用英文等<br>如果你不知道怎么写，让Claude Code帮你写一个也行。<br>这个是我项目的Claude.md</p>
</li>
</ol>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># Windsurfing Club Directory</span></span><br><span class="line"></span><br><span class="line">A Next.js-based directory website for windsurfing clubs worldwide, built on the Mkdirs template with Sanity CMS integration.</span><br><span class="line"></span><br><span class="line"><span class="section">## Project Overview</span></span><br><span class="line"></span><br><span class="line">This project is a customized windsurfing club directory built from a navigation site template. The original template&#x27;s data structure has been adapted specifically for windsurfing clubs:</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="strong">**Original `category`**</span> → <span class="strong">**`country`**</span> (Countries where clubs are located)</span><br><span class="line"><span class="bullet">-</span> <span class="strong">**Original `group`**</span> → <span class="strong">**`continent`**</span> (Continents containing countries) </span><br><span class="line"><span class="bullet">-</span> <span class="strong">**Original `tag`**</span> → Replaced with two specialized fields:</span><br><span class="line"><span class="bullet">  -</span> <span class="strong">**`supportedWatersport`**</span> (Types of watersports offered)</span><br><span class="line"><span class="bullet">  -</span> <span class="strong">**`providedService`**</span> (Services provided by clubs)</span><br><span class="line"></span><br><span class="line"><span class="section">## Tech Stack</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="strong">**Frontend**</span>: Next.js 14 with React 18, TypeScript</span><br><span class="line"><span class="bullet">-</span> <span class="strong">**CMS**</span>: Sanity v3 for content management</span><br><span class="line"><span class="bullet">-</span> <span class="strong">**Styling**</span>: Tailwind CSS with Radix UI components</span><br><span class="line"><span class="bullet">-</span> <span class="strong">**Authentication**</span>: NextAuth.js v5</span><br><span class="line"><span class="bullet">-</span> <span class="strong">**Database**</span>: Sanity as headless CMS</span><br><span class="line"><span class="bullet">-</span> <span class="strong">**Payment**</span>: Stripe integration for premium listings</span><br><span class="line"><span class="bullet">-</span> <span class="strong">**Email**</span>: React Email with Resend</span><br><span class="line"><span class="bullet">-</span> <span class="strong">**Analytics**</span>: Multiple providers (Google Analytics, OpenPanel, Plausible, Umami)</span><br><span class="line"></span><br><span class="line"><span class="section">## Project Structure</span></span><br><span class="line"></span><br><span class="line">\<span class="code">```</span></span><br><span class="line"><span class="code">src/</span></span><br><span class="line"><span class="code">├── actions/           # Server actions for form handling and API calls</span></span><br><span class="line"><span class="code">├── app/              # Next.js App Router structure</span></span><br><span class="line"><span class="code">│   ├── (sanity)/     # Sanity Studio pages</span></span><br><span class="line"><span class="code">│   ├── (website)/    # Main website pages</span></span><br><span class="line"><span class="code">│   │   ├── (public)/ # Public pages (home, club listings)</span></span><br><span class="line"><span class="code">│   │   └── (protected)/ # Authenticated pages (dashboard, submit)</span></span><br><span class="line"><span class="code">│   └── api/          # API routes</span></span><br><span class="line"><span class="code">├── components/       # React components</span></span><br><span class="line"><span class="code">│   ├── analytics/    # Analytics integrations</span></span><br><span class="line"><span class="code">│   ├── auth/         # Authentication components</span></span><br><span class="line"><span class="code">│   ├── item/         # Club listing components</span></span><br><span class="line"><span class="code">│   ├── shared/       # Shared UI components</span></span><br><span class="line"><span class="code">│   └── ui/          # Base UI components (Radix + custom)</span></span><br><span class="line"><span class="code">├── config/          # Configuration files</span></span><br><span class="line"><span class="code">├── data/            # Data fetching functions</span></span><br><span class="line"><span class="code">├── hooks/           # Custom React hooks  </span></span><br><span class="line"><span class="code">├── lib/             # Utility functions and constants</span></span><br><span class="line"><span class="code">├── sanity/          # Sanity configuration and schemas</span></span><br><span class="line"><span class="code">│   ├── schemas/     # Content type definitions</span></span><br><span class="line"><span class="code">│   │   └── documents/directory/ # Core data models</span></span><br><span class="line"><span class="code">│   └── lib/         # Sanity utilities and queries</span></span><br><span class="line"><span class="code">├── styles/          # Global CSS and Tailwind config</span></span><br><span class="line"><span class="code">└── types/           # TypeScript type definitions</span></span><br><span class="line"><span class="code">\```</span></span><br><span class="line"></span><br><span class="line"><span class="section">## Core Data Models</span></span><br><span class="line"></span><br><span class="line"><span class="section">### Item (Windsurfing Club)</span></span><br><span class="line">The main entity representing a windsurfing club with fields for:</span><br><span class="line"><span class="bullet">-</span> Basic info (name, slug, description, link)</span><br><span class="line"><span class="bullet">-</span> Location (latitude, longitude, detailed address)</span><br><span class="line"><span class="bullet">-</span> Categorization (countries, supported watersports, provided services)</span><br><span class="line"><span class="bullet">-</span> Media (icon, image, introduction in markdown)</span><br><span class="line"><span class="bullet">-</span> Status management (publication, payment, sponsor status)</span><br><span class="line"><span class="bullet">-</span> User submission workflow</span><br><span class="line"></span><br><span class="line"><span class="section">### Category (Country)</span></span><br><span class="line">Countries where windsurfing clubs are located:</span><br><span class="line"><span class="bullet">-</span> Basic info (name, slug, description)  </span><br><span class="line"><span class="bullet">-</span> Belongs to a continent (group)</span><br><span class="line"><span class="bullet">-</span> Priority for sorting</span><br><span class="line"></span><br><span class="line"><span class="section">### Group (Continent)</span></span><br><span class="line">Continents that contain countries:</span><br><span class="line"><span class="bullet">-</span> Basic info (name, slug, description)</span><br><span class="line"><span class="bullet">-</span> Priority for sorting</span><br><span class="line"></span><br><span class="line"><span class="section">### Supported Watersport</span></span><br><span class="line">Types of watersports offered by clubs:</span><br><span class="line"><span class="bullet">-</span> Basic info (name, slug, description)</span><br><span class="line"></span><br><span class="line"><span class="section">### Provided Service  </span></span><br><span class="line">Services offered by windsurfing clubs:</span><br><span class="line"><span class="bullet">-</span> Basic info (name, slug, description)</span><br><span class="line"></span><br><span class="line"><span class="section">## Key Features</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="strong">**Multi-tier Submission System**</span>: Free, Pro, and Sponsor tiers with different approval workflows</span><br><span class="line"><span class="bullet">-</span> <span class="strong">**Geographic Organization**</span>: Clubs organized by continent → country hierarchy</span><br><span class="line"><span class="bullet">-</span> <span class="strong">**Advanced Filtering**</span>: Filter by location, watersports, and services</span><br><span class="line"><span class="bullet">-</span> <span class="strong">**Payment Integration**</span>: Stripe for premium submissions</span><br><span class="line"><span class="bullet">-</span> <span class="strong">**User Authentication**</span>: Complete auth system with roles and permissions</span><br><span class="line"><span class="bullet">-</span> <span class="strong">**Admin Dashboard**</span>: Content management through Sanity Studio</span><br><span class="line"><span class="bullet">-</span> <span class="strong">**Responsive Design**</span>: Mobile-first with Tailwind CSS</span><br><span class="line"><span class="bullet">-</span> <span class="strong">**SEO Optimized**</span>: Metadata, sitemaps, and structured data</span><br><span class="line"><span class="bullet">-</span> <span class="strong">**Analytics Ready**</span>: Multiple analytics providers supported</span><br><span class="line"></span><br><span class="line"><span class="section">## Environment Setup</span></span><br><span class="line"></span><br><span class="line">Key environment variables needed:</span><br><span class="line"><span class="bullet">-</span> Sanity project configuration</span><br><span class="line"><span class="bullet">-</span> NextAuth.js secrets and providers</span><br><span class="line"><span class="bullet">-</span> Stripe keys for payments</span><br><span class="line"><span class="bullet">-</span> Email service configuration (Resend)</span><br><span class="line"><span class="bullet">-</span> Analytics provider tokens</span><br><span class="line"></span><br><span class="line"><span class="section">## Development Workflow</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> <span class="strong">**Content Management**</span>: Use Sanity Studio at <span class="code">`/studio`</span> for managing clubs and taxonomy</span><br><span class="line"><span class="bullet">2.</span> <span class="strong">**Local Development**</span>: <span class="code">`npm run dev`</span> for development server</span><br><span class="line"><span class="bullet">3.</span> <span class="strong">**Type Generation**</span>: <span class="code">`npm run typegen`</span> to generate TypeScript types from Sanity schemas</span><br><span class="line"><span class="bullet">4.</span> <span class="strong">**Build Process**</span>: <span class="code">`npm run build`</span> for production builds</span><br><span class="line"></span><br><span class="line"><span class="section">## Import Scripts</span></span><br><span class="line"></span><br><span class="line">The project includes several specialized import scripts in <span class="code">`scripts/`</span> for:</span><br><span class="line"><span class="bullet">-</span> Importing windsurfing club data</span><br><span class="line"><span class="bullet">-</span> Cleaning up duplicates  </span><br><span class="line"><span class="bullet">-</span> Merging geographical data</span><br><span class="line"><span class="bullet">-</span> Analyzing data quality</span><br><span class="line"></span><br><span class="line"><span class="section">## Customization Notes</span></span><br><span class="line"></span><br><span class="line">The template has been extensively customized for the windsurfing domain while maintaining the original&#x27;s flexible architecture. The data model changes allow for proper categorization of watersports clubs while preserving the submission workflow and payment system.</span><br></pre></td></tr></table></figure>


<ol start="3">
<li>及时用 /clear 清理聊天记录<br>由于大模型的上下文空间有限，读的代码多的话，几轮对话下来可能就达到上限了，此时Claude code会自动开启新的对话，并总结你前面的聊天内容作为背景信息。  问题是压缩会丢掉很多关键信息，导致压缩后的代码各种报错。<br>所以为了避免报错，尽量让一个功能在几轮对话内搞定，然后clear，再开启新对话。</li>
</ol>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2025-09-20</span><i class="fa fa-tag"></i></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,https://andrew-ppppeng.github.io/2025/09/20/帆板导航站/,Andrew's Blog,用Claude code开发一个全球帆板运动俱乐部的导航站,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="next pagbuttons"><a class="btn" role="navigation" href="/2025/07/19/%E5%81%A5%E5%BA%B7%E7%9B%91%E6%B5%8B%E4%B8%8E%E6%95%B0%E5%AD%97%E5%8C%96/" title="健康监测&amp;数字化">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>